
@layer base {
  /* Touch optimization for mobile */
  @media (max-width: 768px) {
    /* Basic mobile form optimizations */
    input, textarea, select, button {
      font-size: 16px; /* Prevents zoom on iOS */
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }
    
    /* Improved touch targets */
    button, [role="button"], input[type="radio"], input[type="checkbox"] {
      min-height: 44px;
      min-width: 44px;
      touch-action: manipulation;
    }
    
    /* Essential mobile layout fixes */
    .card-mobile {
      margin: 0 0.5rem 0.75rem 0.5rem;
    }

    .shadow-premium {
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    /* Onboarding flow specific fixes */
    .onboarding-step-card {
      background: white !important;
      backdrop-filter: none !important;
      touch-action: manipulation !important;
      pointer-events: auto !important;
      -webkit-tap-highlight-color: transparent;
    }

    /* Ensure all interactive elements in onboarding are touchable */
    .onboarding-step-card *,
    .onboarding-step-card button,
    .onboarding-step-card input,
    .onboarding-step-card select,
    .onboarding-step-card label {
      touch-action: manipulation;
      pointer-events: auto;
      -webkit-tap-highlight-color: transparent;
    }

    /* Fix goal selection cards */
    .group.relative.overflow-hidden.border-2 {
      touch-action: manipulation;
      pointer-events: auto;
      min-height: 48px;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
    }

    /* Fix subcategory selection buttons */
    .grid button {
      touch-action: manipulation;
      pointer-events: auto;
      -webkit-tap-highlight-color: transparent;
      min-height: 48px;
    }

    /* Navigation buttons */
    .flex.justify-between.items-center button {
      min-height: 48px;
      min-width: 120px;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }

    /* Progress indicators */
    .h-10.w-10.rounded-full {
      touch-action: manipulation;
      pointer-events: auto;
    }

    /* Better mobile typography */
    .text-4xl.md\:text-5xl.lg\:text-6xl.xl\:text-7xl {
      font-size: 2.5rem;
      line-height: 1.1;
    }

    /* Mobile form improvements */
    .h-12 {
      height: 48px;
      font-size: 16px;
      padding: 0.75rem;
    }

    /* Grid layouts */
    .grid.grid-cols-1.md\:grid-cols-2.lg\:grid-cols-3 {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .grid.grid-cols-2.md\:grid-cols-4 {
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    /* Spacing optimizations */
    .py-16 {
      padding-top: 3rem;
      padding-bottom: 3rem;
    }

    .py-20 {
      padding-top: 4rem;
      padding-bottom: 4rem;
    }

    .p-8 {
      padding: 1.5rem;
    }

    .space-y-4 > :not([hidden]) ~ :not([hidden]) {
      margin-top: 1rem;
    }

    .space-y-5 > :not([hidden]) ~ :not([hidden]) {
      margin-top: 1.25rem;
    }

    /* Prevent horizontal scrolling */
    body {
      overflow-x: hidden;
    }

    /* Better focus states */
    input:focus,
    select:focus,
    button:focus {
      outline: 2px solid #3b82f6;
      outline-offset: 2px;
    }

    /* Button active states */
    button:active {
      transform: scale(0.98);
    }

    /* Select elements */
    select {
      -webkit-appearance: menulist;
      appearance: menulist;
      touch-action: manipulation;
      height: 48px;
      font-size: 16px;
      padding: 0.75rem;
    }

    /* Image and media optimization */
    img {
      max-width: 100%;
      height: auto;
    }

    video {
      width: 100%;
      height: auto;
    }
  }
}

/* Disable animations on mobile for better performance */
@media (max-width: 768px) and (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
